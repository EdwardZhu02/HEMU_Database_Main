<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Jbrowse - HEMU</title>
    <script
      src="//unpkg.com/react@16/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="//unpkg.com/react-dom@16/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script
      src="//unpkg.com/@jbrowse/react-linear-genome-view/dist/react-linear-genome-view.umd.development.js"
      crossorigin
    ></script>
</head>
<body>
    {% load static %}
    <div style="text-align: center"><a href={% url "home_page" %}>Back to Home Page</a></div>
    <br>
    <div id="jbrowse_linear_genome_view"></div>

    <script type="module">
      import assembly from '{% static 'Genome_resources/volvox_assembly.js' %}'
      import tracks from '{% static 'Genome_resources/volvox_tracks.js' %}'
      const { createViewState, JBrowseLinearGenomeView } =
        JBrowseReactLinearGenomeView
      const { createElement } = React
      const { render } = ReactDOM
      const updates = document.getElementById('update')
      const state = new createViewState({
        assembly,
        tracks,
        onChange: patch => {
          updates.innerHTML += JSON.stringify(patch) + '\n'
        },
      })

      const textArea = document.getElementById('session')
      document.getElementById('showsession').addEventListener('click', () => {
        textArea.innerHTML = JSON.stringify(state.session, undefined, 2)
      })
      render(
        createElement(JBrowseLinearGenomeView, { viewState: state }),
        document.getElementById('jbrowse_linear_genome_view'),
      )
    </script>
    <div style="visibility: hidden">
        <button id="showsession">Show current session</button>
        <textarea id="session" name="session" rows="20" cols="80"></textarea>
        <p>updates:</p>
        <textarea
          id="update"
          name="update"
          rows="5"
          cols="80"
          wrap="off"
        ></textarea>
    </div>
</body>
</html>